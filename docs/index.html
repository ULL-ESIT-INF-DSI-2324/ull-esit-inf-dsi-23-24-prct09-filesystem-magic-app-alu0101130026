<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026</title><meta name="description" content="Documentation for ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026</h2></div><div class="tsd-panel tsd-typography"><p><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026&metric=alert_status" alt="Quality Gate Status"></a></p>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026/badge.svg?branch=main" alt="Coverage Status"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026/actions/workflows/node.js.yml/badge.svg" alt="Tests"></a></p>
<a id="md:práctica-9---aplicación-para-coleccionistas-de-cartas-magic" class="tsd-anchor"></a><h3><a href="#md:práctica-9---aplicación-para-coleccionistas-de-cartas-magic">Práctica 9 - Aplicación para coleccionistas de cartas Magic</a></h3><a id="md:datos-identificativos" class="tsd-anchor"></a><h2><a href="#md:datos-identificativos">Datos identificativos</a></h2><ul>
<li>Diego Díaz Fernández</li>
<li><a href="mailto:alu0101130026@ull.edu.es">alu0101130026@ull.edu.es</a></li>
</ul>
<a id="md:objetivos" class="tsd-anchor"></a><h2><a href="#md:objetivos">Objetivos</a></h2><p>En esta semana, se nos pide una aplicación para los amantes del coleccionismo, más concretamente las cartas Magic. El sistema tendrá varias funcionalidades: añadir, eliminar, modificar, listar y leer la información de dichas cartas. Tendremos que hacer uso por primera vez del paquete yargs y chalk.</p>
<a id="md:interfaces" class="tsd-anchor"></a><h2><a href="#md:interfaces">Interfaces</a></h2><p>Como ya venimos haciendo en las últimas semanas de prácticas, lo primero será definir las interfaces que nos ayudarán a desarrollar nuestro código.</p>
<p>La primera que encontramos es Card. En ella están todos los datos que tenemos que registrar sobre una carta, con algún parámetro opcional.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">Card</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">nombre</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">manaCost</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">color</span><span class="hl-1">: </span><span class="hl-3">Color</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">type</span><span class="hl-1">: </span><span class="hl-3">Type</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">rarity</span><span class="hl-1">: </span><span class="hl-3">Rarity</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">rules</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">strength</span><span class="hl-1">?: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">resistance</span><span class="hl-1">?: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">loyaltyMarks</span><span class="hl-1">?: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">marketValue</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>La segunda y última es la interfaz User. Esta solo tiene los campos name y cards, que es un array de instancias de la interfaz card.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">User</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">cards</span><span class="hl-1">: </span><span class="hl-3">Card</span><span class="hl-1">[];</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:enumerados" class="tsd-anchor"></a><h2><a href="#md:enumerados">Enumerados</a></h2><p>En esta práctica, además, como tenemos varias características de las cartas que pueden tener distintos valores, se ha definido una carpeta llamada enums con los distintos enumerados sobre esos atributos.</p>
<p>El primero de ellos es el color, en él se definen los distintos colores que puede tomar la carta.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">enum</span><span class="hl-1"> </span><span class="hl-3">Color</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">White</span><span class="hl-1"> = </span><span class="hl-6">&quot;blanco&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Blue</span><span class="hl-1"> = </span><span class="hl-6">&quot;azul&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Black</span><span class="hl-1"> = </span><span class="hl-6">&quot;negro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Red</span><span class="hl-1"> = </span><span class="hl-6">&quot;rojo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Green</span><span class="hl-1"> = </span><span class="hl-6">&quot;verde&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Nocolor</span><span class="hl-1"> = </span><span class="hl-6">&quot;incoloro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Multicolor</span><span class="hl-1"> = </span><span class="hl-6">&quot;multicolor&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>El segundo es la rareza, que puede tomar 4 valores distintos.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">enum</span><span class="hl-1"> </span><span class="hl-3">Rarity</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">Common</span><span class="hl-1"> = </span><span class="hl-6">&quot;comun&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Infrequent</span><span class="hl-1"> = </span><span class="hl-6">&quot;infrecuente&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Rare</span><span class="hl-1"> = </span><span class="hl-6">&quot;rara&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Mythic</span><span class="hl-1"> = </span><span class="hl-6">&quot;mitica&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Por último, el tipo de la carta, variando entre 7 distintos, de ahí que también tenga que ser un enumerado.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">enum</span><span class="hl-1"> </span><span class="hl-3">Type</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">Ground</span><span class="hl-1"> = </span><span class="hl-6">&quot;tierra&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Creature</span><span class="hl-1"> = </span><span class="hl-6">&quot;criatura&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Enchantment</span><span class="hl-1"> = </span><span class="hl-6">&quot;encantamiento&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Spell</span><span class="hl-1"> = </span><span class="hl-6">&quot;conjuro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Instantaneous</span><span class="hl-1"> = </span><span class="hl-6">&quot;instantaneo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Artifact</span><span class="hl-1"> = </span><span class="hl-6">&quot;artefacto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Planeswalker</span><span class="hl-1"> = </span><span class="hl-6">&quot;planeswalker&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:gestor" class="tsd-anchor"></a><h2><a href="#md:gestor">Gestor</a></h2><p>Seguimos con el archivos gestor.ts. En este se encuentran definidos los distintos comandos, haciendo uso de chalk y yargs. Pasaremos a comentar el comando modificar, puesto que el resto siguen el mismo esqueleto, solo cambiando un poco la implementación.</p>
<pre><code><span class="hl-7">yargs</span><span class="hl-1">(</span><span class="hl-7">hideBin</span><span class="hl-1">(</span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-7">command</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">command:</span><span class="hl-1"> </span><span class="hl-6">&quot;modificar&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Modificar una carta de la colección&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">usuario:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nombre del usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">id:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;number&quot;</span><span class="hl-1">, </span><span class="hl-4">demandOption:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;ID de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">nombre:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nuevo nombre de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">manaCost:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;number&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nuevo coste de mana de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">color:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nuevo color de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nuevo tipo de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">rarity:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nueva rareza de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">rules:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nuevas reglas de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">strength:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;number&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nueva fuerza de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">resistance:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;number&quot;</span><span class="hl-1">, </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nueva resistencia de la carta&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">loyaltyMarks:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nuevas marcas de lealtad de la carta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">marketValue:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-6">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">describe:</span><span class="hl-1"> </span><span class="hl-6">&quot;Nuevo valor de mercado de la carta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-7">handler</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">directorio</span><span class="hl-1"> = </span><span class="hl-6">`./</span><span class="hl-2">${</span><span class="hl-4">args</span><span class="hl-8">.</span><span class="hl-4">usuario</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">archivo</span><span class="hl-1"> = </span><span class="hl-6">`</span><span class="hl-2">${</span><span class="hl-4">directorio</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">args</span><span class="hl-8">.</span><span class="hl-4">id</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-4">archivo</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">contenido</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">readFileSync</span><span class="hl-1">(</span><span class="hl-4">archivo</span><span class="hl-1">, </span><span class="hl-6">&quot;utf-8&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">carta</span><span class="hl-1">: </span><span class="hl-3">Card</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-4">contenido</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">manaCost</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">manaCost</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">manaCost</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">color</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">type</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">rarity</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">rarity</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">rarity</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">rules</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">rules</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">rules</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">strength</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">strength</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">strength</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">resistance</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">resistance</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">resistance</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">loyaltyMarks</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">loyaltyMarks</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">loyaltyMarks</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">marketValue</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">carta</span><span class="hl-1">.</span><span class="hl-4">marketValue</span><span class="hl-1"> = </span><span class="hl-4">args</span><span class="hl-1">.</span><span class="hl-4">marketValue</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">        </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">archivo</span><span class="hl-1">, </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-4">carta</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-7">green</span><span class="hl-1">(</span><span class="hl-6">&quot;Carta modificada correctamente.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">chalk</span><span class="hl-1">.</span><span class="hl-7">red</span><span class="hl-1">(</span><span class="hl-6">&quot;No se encontró ninguna carta con ese ID.&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-7">help</span><span class="hl-1">().</span><span class="hl-4">argv</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<p>Lo primero es definir en yargs el nombre de nuestro comando, que en este caso será modificar. Después pasamos a la parte del builder, el cual consta del usuario y después todos los campos que se pueden modificar, como son id, nombre, manaCost...</p>
<p>Ahora pasamos a la parte del manejador o handler. En este es donde se implementa el código a realizar. En el caso particular de modificar, lo que tenemos es que comprobar el atributo que se quiere modificar, esto se hace con los if que vemos en el código, comprobando previamente si la carta existe. Una vez modificado, escribimos los datos en el JSON de la carta y anunciamos que se ha realizado correctamente. Si la carta no existe se mostrará un mensaje. Destar¡car que los mensajes de éxito van en verde y los de error en rojo.</p>
<p>El resto de comandos tienen el mismo esqueleto: un builder y un handler. Teniendo en cuenta en lo que consiste cada uno de los comandos se ha implementado de una manera en concreto.</p>
<a id="md:main" class="tsd-anchor"></a><h2><a href="#md:main">Main</a></h2><p>Ahora pasamos ya a nuestro programa principal, en el solo están las dos funciones que nos han servido de apoyo en los comandos pero que no hemos comentado todavía.</p>
<p>La primera función es SaveCard. Esta lo que hace es comprobar si existe el directorio y lo crea si no es así. Después crea también el archivo .json que contiene los datos de la carta.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-7">saveCard</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">: </span><span class="hl-3">User</span><span class="hl-1">, </span><span class="hl-4">carta</span><span class="hl-1">: </span><span class="hl-3">Card</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">directorio</span><span class="hl-1"> = </span><span class="hl-6">`./</span><span class="hl-2">${</span><span class="hl-4">usuario</span><span class="hl-8">.</span><span class="hl-4">name</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-4">directorio</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">mkdirSync</span><span class="hl-1">(</span><span class="hl-4">directorio</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">archivo</span><span class="hl-1"> = </span><span class="hl-6">`</span><span class="hl-2">${</span><span class="hl-4">directorio</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">carta</span><span class="hl-8">.</span><span class="hl-4">id</span><span class="hl-2">}</span><span class="hl-6">.json`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">archivo</span><span class="hl-1">, </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-4">carta</span><span class="hl-1">));</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>La segunda es uploadCard, la cual lo que hace es retornar las cartas de un usuario en caso de que este tenga cartas. Lee el directorio y con un bucle va añadiendo las cartas a un array de instancias de cartas.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">function</span><span class="hl-1"> </span><span class="hl-7">uploadCards</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">: </span><span class="hl-3">User</span><span class="hl-1">): </span><span class="hl-3">Card</span><span class="hl-1">[] {</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">directorio</span><span class="hl-1"> = </span><span class="hl-6">`./</span><span class="hl-2">${</span><span class="hl-4">usuario</span><span class="hl-8">.</span><span class="hl-4">name</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">existsSync</span><span class="hl-1">(</span><span class="hl-4">directorio</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> [];</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">archivos</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">readdirSync</span><span class="hl-1">(</span><span class="hl-4">directorio</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">cartas</span><span class="hl-1">: </span><span class="hl-3">Card</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">  </span><span class="hl-4">archivos</span><span class="hl-1">.</span><span class="hl-7">forEach</span><span class="hl-1">((</span><span class="hl-4">archivo</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">contenido</span><span class="hl-1"> = </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-7">readFileSync</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-2">${</span><span class="hl-4">directorio</span><span class="hl-2">}</span><span class="hl-6">/</span><span class="hl-2">${</span><span class="hl-4">archivo</span><span class="hl-2">}</span><span class="hl-6">`</span><span class="hl-1">, </span><span class="hl-6">&quot;utf-8&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-5">carta</span><span class="hl-1">: </span><span class="hl-3">Card</span><span class="hl-1"> = </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-4">contenido</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">cartas</span><span class="hl-1">.</span><span class="hl-7">push</span><span class="hl-1">(</span><span class="hl-4">carta</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">cartas</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Este sería todo el programa desarrollado. Destacar que se han hecho las pruebas con un cubrimiento del 100% con Coveralls, además de comentar el programa utilizando Typedoc.</p>
<a id="md:sesión-pe" class="tsd-anchor"></a><h2><a href="#md:sesión-pe">Sesión PE</a></h2><p>En la novena semana de la asignatura, se nos pide desarrollar, usando el Template Method, un programa que lea archivos CSV y JSON con instancias de problema de la mochila. Lo primero será definir la interfaz FileProcessorHooks, en la que se definen los hooks con sus dos métodos pre y post.</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">FileProcessorHooks</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">preProcess</span><span class="hl-1">(</span><span class="hl-4">fileContent</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">): </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">postProcess</span><span class="hl-1">(</span><span class="hl-4">benefits</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[], </span><span class="hl-4">weights</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">void</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>El siguiente archivo, el main, es el que alberga el funcionamiento del programa, con las clases y las funciones. Lo primero sería definir una clase para poner los hooks por defecto:</p>
<pre><code><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">DefaultHooks</span><span class="hl-1"> </span><span class="hl-2">implements</span><span class="hl-1"> </span><span class="hl-3">FileProcessorHooks</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">preProcess</span><span class="hl-1">(</span><span class="hl-4">fileContent</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">): </span><span class="hl-3">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">fileContent</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-7">postProcess</span><span class="hl-1">(</span><span class="hl-4">benefits</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[], </span><span class="hl-4">weights</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]): </span><span class="hl-3">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">&quot;Default post-processing:&quot;</span><span class="hl-1">, </span><span class="hl-4">benefits</span><span class="hl-1">, </span><span class="hl-4">weights</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>Hecho esto, entramos en la clase BackpackFileProcessor, la cual será la que procese los archivos CSV y JSON. Lo primero será definir el constructor de los hooks y después ya nos metemos de lleno con el método process. Este define los arrays weights y benefits, que será retornados una vez sean procesados los archivos. Comprobamos primero si tiene formato JSON, si es así mapeamos los elementos en nuestros arrays. En caso contrario, este será un archivo CSV, por lo que se tratará con el siguiente bucle:</p>
<pre><code><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> = </span><span class="hl-9">2</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1"> &lt; </span><span class="hl-4">numElements</span><span class="hl-1"> + </span><span class="hl-9">2</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">          </span><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-5">numElemento</span><span class="hl-1">, </span><span class="hl-5">peso</span><span class="hl-1">, </span><span class="hl-5">beneficio</span><span class="hl-1">] = </span><span class="hl-4">lines</span><span class="hl-1">[</span><span class="hl-4">i</span><span class="hl-1">]</span><br/><span class="hl-1">            .</span><span class="hl-7">split</span><span class="hl-1">(</span><span class="hl-6">&quot;,&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">            .</span><span class="hl-7">map</span><span class="hl-1">(</span><span class="hl-4">Number</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-4">benefits</span><span class="hl-1">.</span><span class="hl-7">push</span><span class="hl-1">(</span><span class="hl-4">beneficio</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-4">weights</span><span class="hl-1">.</span><span class="hl-7">push</span><span class="hl-1">(</span><span class="hl-4">peso</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span>
</code><button>Copy</button></pre>
<p>Después solo tendremos que manejar un posible error al procesar el archivo y retornar los arrays. Al final de la clase incluiremos la función que comprueba si el formato es JSON.</p>
<pre><code><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-7">isJSONFormat</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">): </span><span class="hl-4">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">JSON</span><span class="hl-1">.</span><span class="hl-7">parse</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">false</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code><button>Copy</button></pre>
<p>Al final del main se ha incluido un ejemplo con unos hooks personalizados, definiendo los métodos pre y post Process.</p>
<a id="md:conclusiones" class="tsd-anchor"></a><h2><a href="#md:conclusiones">Conclusiones</a></h2><p>Terminada ya la semana 9 de la asignatura, ya pasado el ecuador de la misma, hacemos retrospección y vemos que ya tenemos un amplio manejo de typescript. Empezamos definiendo funciones básicas como <code>Hola Mundo</code> y ahora somos capaces de usar yargs para pasarle por consola distintos comandos que nosotros mismos hemos diseñado.</p>
<p>Si profundizamos en lo hecho en esta semana, vemos sobre todo que los paquetes yargs y chalk nos aportan herramientas que nos serán muy útiles de aquí en adelante. En conclusión, ha sido una semana de un aprendizaje que nos será de gran provecho, pues son dos elementos muy intuitivos y de gran ayuda.</p>
<a id="md:bibliografía" class="tsd-anchor"></a><h2><a href="#md:bibliografía">Bibliografía</a></h2><ul>
<li><a href="http://yargs.js.org/">http://yargs.js.org/</a></li>
<li><a href="https://www.npmjs.com/package/chalk">https://www.npmjs.com/package/chalk</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><ul><li><a href="#md:práctica-9---aplicación-para-coleccionistas-de-cartas-magic"><span>Práctica 9 -<wbr/> <wbr/>Aplicación para coleccionistas de cartas <wbr/>Magic</span></a></li></ul><a href="#md:datos-identificativos"><span>Datos identificativos</span></a><a href="#md:objetivos"><span>Objetivos</span></a><a href="#md:interfaces"><span>Interfaces</span></a><a href="#md:enumerados"><span>Enumerados</span></a><a href="#md:gestor"><span>Gestor</span></a><a href="#md:main"><span>Main</span></a><a href="#md:sesión-pe"><span>Sesión PE</span></a><a href="#md:conclusiones"><span>Conclusiones</span></a><a href="#md:bibliografía"><span>Bibliografía</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>ull-esit-inf-dsi-23-24-prct09-filesystem-magic-app-alu0101130026</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><div class="tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div></body></html>